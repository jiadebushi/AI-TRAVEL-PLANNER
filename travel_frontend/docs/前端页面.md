------

## 🧭 页面总览（建议 5 个主界面）

| 页面                           | 对应后端接口                                                 | 是否必要   | 说明                                            |
| ------------------------------ | ------------------------------------------------------------ | ---------- | ----------------------------------------------- |
| 1️⃣ 登录 / 注册页                | `/api/v1/auth/login`, `/api/v1/auth/register`                | ✅ 必须     | 用户登录与注册入口                              |
| 2️⃣ 行程主页（行程列表页）       | `/api/v1/plan/`                                              | ✅ 必须     | 展示用户所有行程，提供创建新行程入口            |
| 3️⃣ 行程详情页                   | `/api/v1/plan/{trip_id}`, `/api/v1/budget/{trip_id}`         | ✅ 必须     | 展示行程每天的安排、预算详情、地图预览          |
| 4️⃣ 个人主页                     | `/api/v1/users/me`, `/api/v1/users/me (PUT)`                 | ✅ 必须     | 展示信息和修改用户偏好信息                      |
| 5️⃣ 费用录入弹窗（合并到详情页） | `/api/v1/budget/expense/text`, `/api/v1/budget/expense/voice` | ⚙️ 建议补充 | 支持文本/语音方式添加开销记录（与行程详情相关） |
| 创建新行程                     | `/api/v1/plan/text` + `/api/v1/plan/voice`                   | ✅ 必须     | 创建新行程弹窗，包括文字输入框输入与语音输入    |

> 说明：
>
> - 费用录入弹窗作为 **行程详情页** 的一个子功能区（例如一个「添加开销」按钮弹出框）。
> - 创建新行程作为行程主页的一个功能（[规划新行程]按钮弹出弹窗）
> - 地图展示所需经纬度数据 `latitude`、`longitude` 已在 `/plan/{trip_id}` 提供，可直接用第三方地图组件（高德）渲染，无需后端额外接口。

------

## 1️⃣ 登录 / 注册页

### 对应接口

- `POST /api/v1/auth/login`
- `POST /api/v1/auth/register`

### 功能

- 用户注册（输入邮箱、密码、可选偏好）
- 用户登录（邮箱 + 密码）
- 登录后保存 `access_token` 到 LocalStorage

### 展示内容

- 登录/注册表单
- 注册时可选“旅行偏好”输入框
- 登录失败错误提示（401）
- 注册失败提示（邮箱已被注册）

------

## 2️⃣ 行程主页（行程列表页）

### 对应接口

- `GET /api/v1/plan/`
- `POST /api/v1/plan/text`
- `POST /api/v1/plan/voice`

### 功能

- 加载当前用户的所有行程列表
   （显示名称、目的地、时间、状态）
- 跳转到对应的行程详情页
- 加载中/生成中状态提示（行程生成需要 30-60s）
- 行程创建弹窗
  - 通过**文本输入**创建新行程（调用 `/plan/text`）多个输入框
  - 通过**语音上传**创建新行程（调用 `/plan/voice`）

### 展示内容

- 行程卡片（含 trip_name、destination、date_range、status）
- 新行程输入框 + “生成行程”按钮+“取消按钮”
- “语音创建行程”按钮（文件上传）
- 状态提示：`草稿`、`生成中`、`已生成`、`进行中`、`已完成`
- 顶部导航栏（跳转到“个人主页”）

------

## 3️⃣ 行程详情页

### 对应接口

- `GET /api/v1/plan/{trip_id}`
- `GET /api/v1/budget/{trip_id}`
- `PUT /api/v1/plan/{trip_id}`（可选：修改名称或状态）

### 功能

- 展示行程基础信息（名称、目的地、时间）
- 按天显示每日行程安排
  - 每日主题
  - 酒店推荐
  - 活动列表（含时间段、类型、备注）
- 展示预算与支出统计图表（根据 `/budget/{trip_id}`）
- 预览地图：将每日活动的经纬度渲染为标记点
- 跳转或弹出「录入开销」模块（见下一页）
- 修改行程名称或状态（调用 PUT）

### 展示内容

- 标题栏：行程名称 + 日期范围 + 状态
- 分天卡片（Day 1、Day 2...）
  - 主题、酒店推荐
  - 活动清单（poi_name、时间段、交通方式）
- 预算卡片
  - 预计总额 + 分类预算表
  - 若调用 `/budget/{trip_id}`，可显示实际支出及差额
- 地图（展示各活动地点标记点）
- “添加开销”按钮（调用文本/语音录入接口）

------

## 4️⃣ 个人主页

### 对应接口

- `GET /api/v1/users/me`
- `PUT /api/v1/users/me`

### 功能

- 查看用户信息（邮箱、偏好）
- 修改偏好（保存后调用 PUT 更新）

### 展示内容

- 邮箱（只读）
- 偏好（可编辑）
- “保存修改”按钮
- “退出登录”按钮（清除 token）

------

## 5️⃣ 开销录入弹窗

### 对应接口

- `POST /api/v1/budget/expense/text`
- `POST /api/v1/budget/expense/voice`

### 功能

- 文本录入消费（输入描述，自动解析类别与金额）
- 语音录入消费（上传音频文件）
- 录入成功后刷新预算显示

### 展示内容

- 当前行程标题
- 文本输入框 + 提交按钮
- 语音录制上传按钮
- 最近消费记录（从 `/budget/{trip_id}` 中的 `expenses` 加载）

------

## 🔧 可选的界面扩展（不建议优先开发）

| 功能             | 对应接口                | 备注                           |
| ---------------- | ----------------------- | ------------------------------ |
|                  |                         |                                |
| 展示费用分析图表 | `GET /budget/{trip_id}` | 可在预算卡片中展示饼图或柱状图 |
| 行程生成中动画页 | 无需接口                | UI体验优化                     |

------

## ✅ 小结：最终推荐的前端页面结构

| 页面         | 功能点                                 | 是否必须          |
| ------------ | -------------------------------------- | ----------------- |
| 登录注册页   | 登录、注册、token管理                  | ✅                 |
| 行程主页     | 列表展示、创建行程（文本/语音）        | ✅                 |
| 行程详情页   | 每日行程、预算展示、地图、录入开销入口 | ✅                 |
| 个人主页     | 用户信息查看与偏好修改                 | ✅                 |
| 开销录入弹窗 | 文本/语音录入                          | ✅（可嵌入详情页） |