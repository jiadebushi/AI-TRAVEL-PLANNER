# 🛠️ AI 智能旅行规划项目 - Python 后端推荐库和工具列表

本项目涉及 Web 服务、AI 交互、外部 API 调用和云数据库操作，以下是按模块划分的推荐 Python 库。

## 一、Web 框架与数据验证 (Web Framework & Data Validation)

| 领域 | 推荐库 | 作用 | 备注 |
| :--- | :--- | :--- | :--- |
| **Web 框架** | **FastAPI** | 构建高性能、异步 API 的首选。适合 AI 场景中大量的 I/O 密集型任务。 | 推荐作为后端骨架。 |
| **异步服务器** | **Uvicorn** / **Gunicorn** | 运行 ASGI 应用程序（如 FastAPI）的高性能服务器。 | 生产环境中通常使用 Gunicorn + Uvicorn Worker。 |
| **数据验证** | **Pydantic** | 用于定义请求、响应和数据库的数据模型，强制类型检查和数据校验。 | FastAPI 的核心依赖，用于结构化 LLM 的输出。 |

## 二、AI 与大语言模型 (LLM & AI Orchestration)

| 领域 | 推荐库 | 作用 | 备注 |
| :--- | :--- | :--- | :--- |
| **LLM 客户端** | **`openai`** / **`google-genai`** / **`anthropic`** | 官方 SDK，用于调用选定的大模型 API。 | 确保使用其**异步客户端 (Async Client)** 以提高并发性能。 |
| **多 LLM 接口** | **`LiteLLM`** | 提供统一接口调用多种 LLM，便于未来模型切换、负载均衡和成本管理。 | 可选，用于提升 LLM 层的灵活性。 |
| **LLM 编排** | **`LangChain`** / **`LlamaIndex`** | 用于构建复杂的 LLM 应用逻辑，特别是“意图解析”和“工具调用 (Tool Use)”流程。 | 辅助处理 Prompt 工程，连接 LLM 决策与外部 API。 |

## 三、外部 API 集成 (External API Integration)

| 领域 | 推荐库 | 作用 | 备注 |
| :--- | :--- | :--- | :--- |
| **HTTP 请求** | **`httpx`** | 现代化、异步的 HTTP 客户端库。用于调用所有外部 API。 | 推荐使用异步版本，替代 `requests`。 |
| **科大讯飞** | **`httpx` + `hashlib`** | 用于调用科大讯飞 WebAPI。需手动实现签名 (Signature) 和鉴权逻辑。 | 根据讯飞官方文档，多为自定义 WebSocket 或 HTTP 请求。 |
| **地图 API** | **`httpx`** | 直接通过 HTTP 请求调用高德/百度地图 Web API 的 POI 搜索、地理编码和距离测量服务。 | 无需完整的地图 SDK，只调用 Web API。 |

## 四、数据库与认证 (Database & Authentication)

| 领域 | 推荐库 | 作用 | 备注 |
| :--- | :--- | :--- | :--- |
| **Supabase (Postgres)** | **`sqlalchemy`** + **`psycopg2`** | `SQLAlchemy` 作为 ORM，`psycopg2` 作为 PostgreSQL 驱动。 | 适用于 Python 后端与 Supabase 数据库的稳定交互。 |
| **Supabase 客户端** | **`supabase-py`** | 官方 Python 客户端，用于处理用户认证 (Auth) 和实时同步 (Realtime)。 | 简化与 Supabase 服务的集成。 |
| **Firebase** | **`firebase-admin`** | Google 官方 SDK，用于与 Firebase Authentication 和 Firestore/Realtime DB 交互。 | 如果选择 Firebase 时的替代方案。 |
| **JWT 处理** | **`python-jose`** / **`PyJWT`** | 用于解析和验证用户 Token，实现后端接口的认证守卫。 | 确保只有合法用户才能访问受保护的 API。 |

## 五、工具与部署 (Utilities & Deployment)

| 领域 | 推荐库 | 作用 | 备注 |
| :--- | :--- | :--- | :--- |
| **任务队列** | **`Celery`** / **`RQ`** | 将耗时的任务（如 `generate_full_itinerary`）放入队列中异步处理。 | **关键**：防止 API 请求因等待 LLM 响应而超时。 |
| **配置管理** | **`python-dotenv`** | 管理 API 密钥、数据库连接字符串等环境变量。 | 保证生产环境的安全性。 |
| **缓存** | **`Redis-Py`** | 用于实现缓存层，存储 LLM 结果和 API 响应，减少费用并提升速度。 | 依赖于 Redis 缓存服务器。 |